---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  warning = FALSE,
  error = FALSE,
  message = FALSE
)
```

# covidtwitterbot

<!-- badges: start -->
<!-- badges: end -->

The goal of covidtwitterbot is to generate the figures and maps that are posted on my twitter bot, @covid_coulsim.  

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("SimonCoulombe/covidtwitterbot")
```
## Example  


### Tables   
Here are the tables you can fetch and the graphics you can generate..  They are generated from the most up-to-date data.

```{r example}
library(covidtwitterbot)

```

The `load_inspq_covid19_hist()` function fetches historical data for Quebec by age, health region and gender.   This includes the numbers of cases ("cas_*"), of deaths ("dec_*") of hospitalizations ("hos_*") and .. something else ("psi_*").


```{r load_inspq_covid19_hist}
load_inspq_covid19_hist() %>% tail(20)
```

The load_inspq_manual_data() function returns the historical number of hospitalisation (hospits_ancien and hospits), intensive care (si) and number of tests (volumetrie) for the province

```{r load_inspq_manual_data}
load_inspq_manual_data() %>% tail(20)
```
The get_clean_rls_data() function returns the historical number of cases at the RLS (région locale de service).  There are no historical files at the RLS level on the INSPQ website. This function depends on a bunch of historical data that I collected, plus a daily archive repository maintained by Jean-Paul R Soucy.

This function takes a while because it has to download a few hundred of CSVs before aggregating them.  
```{r}
get_clean_rls_data() %>% tail(20)
```


### Figures and maps


```{r,fig.height = 9, fig.width = 12}
graph_deces_hospit_tests()
```


```{r,fig.height = 9, fig.width = 12}
graph_quebec_cas_par_region()
```



```{r,fig.height = 9, fig.width = 12}
graph_quebec_cas_par_age()
```




```{r,fig.height = 6, fig.width = 16}
graph_quebec_cas_par_age_heatmap()
```


```{r,fig.height = 22, fig.width = 16}
graph_quebec_cas_par_rls_heatmap()
```
`carte_rls()` crée une carte montrant le nombre moyen de cas par jour par million d'habitant durant les 7 derniers jours
```{r,fig.height = 10, fig.width = 12}
carte_rls()
```

  
  
### Shapefile  

The shapefile `shp_rls`  shows all the RLS in Quebec after removing water.  

```{r}
plot(shp_rls[,1])
```

### Palettes  

palette_OkabeIto is a color palette that was built by higher beings to be visible to color-blind people
```{r}
palette_OkabeIto
```

